!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i{constructor(t){const e=document.createElement("audio");e.src=t,e.setAttribute("preload","auto"),e.setAttribute("controls","none"),e.style.display="none",this.sound=e,document.body.appendChild(this.sound)}play(){this.sound.play()}stop(){this.sound.pause()}loopOn(){this.sound.loop=!0}loopOff(){this.sound.loop=!1}}const n=t=>{const e=document.querySelectorAll(t);if(!e)throw new Error(`Element with selector '${t}' is not found`);return 1===e.length?e[0]:e},o=(t,e)=>{if(!t||!e)throw new Error("Element and property name must be passed");return parseInt(window.getComputedStyle(t).getPropertyValue(e))},r=t=>{const e=window.getComputedStyle(t);return new WebKitCSSMatrix(e.webkitTransform).m41},a=t=>t.sort((t,e)=>{const s=Object.values(t)[0];return Object.values(e)[0]-s}),l=["#f2002c","#fcf242","#1cc8f5","#66ff00","#01f9c6","#0ff0fc","#ffcf00","#dfff11","#bf00ff"];class c{constructor(t,e,s){this.player=n(t),this.height=o(this.player,"height"),this.width=o(this.player,"width"),this.left=o(this.player,"left"),this.obstacleWidth=e,this.isJumping=!1,this.jumpInterval=0,this.screenHeight=s,this.jumpHandler=this.jump.bind(this),this.jumpOnKeypressHandler=this.jumpOnKeypress.bind(this),document.addEventListener("click",this.jumpHandler),document.addEventListener("keyup",this.jumpOnKeypressHandler)}jump(){this.stopJumping(),this.isJumping=!0;let t=0;const e=.005274*this.screenHeight;this.jumpInterval=window.setInterval(()=>{const s=this.getTop();s>80&&t<15&&(this.player.style.top=s-e+"px"),t>20&&(this.stopJumping(),this.isJumping=!1,t=0),t++},10)}stopJumping(){clearInterval(this.jumpInterval)}destroyJumping(){document.removeEventListener("click",this.jumpHandler),document.removeEventListener("keyup",this.jumpOnKeypressHandler)}jumpOnKeypress(t){" "===t.key&&this.jump()}getDimensions(){return{height:this.height,width:this.width,left:this.left}}isHit(t,e){const s=this.getTop(),i=this.left+this.width,n=i-this.obstacleWidth,o=.25*(t-80)-this.height,r=s>t-this.height,a=e.pipe1Left<i&&e.pipe1Left>n,l=e.pipe2Left<i&&e.pipe2Left>n,c=s<e.hole1Top||s>e.hole1Top+o,d=s<e.hole2Top||s>e.hole2Top+o;return r||a&&c||l&&d}getTop(){return o(this.player,"top")}initiateGravity(t,e){const s=.00633*t,i=window.setInterval(()=>{const t=this.getTop();this.isJumping||(this.player.style.top=t+s+"px"),e(i)},10)}}const d=n(".hole"),h=n(".obstacle"),p=n("#character"),u=n("#startGameBtn"),m=n("#overlay"),f=n("#tScore"),g=n("#cScore"),y=n("#lastScore"),v=n("#leaderboard"),L=n("#toggleMusic"),b=n("#resetScores"),S=n("#toggleSettings");let w=500,T=0,j=[],O=!0;const E=new i("./dist/assets/audio/bgMusic.ogg"),x=new class{constructor(t){this.obstacles=n(t),this.width=o(this.obstacles[0],"width")}get score(){return void 0===this._score?0:this._score}set score(t){this._score=t}createHoles(t){this.obstacles.forEach(e=>{this.randomHoleFn(e),e.addEventListener("animationiteration",()=>{this.randomHoleFn(e),this.updateScore(t)})})}randomHoleFn(t){const e=-(60*Math.random()+35),s=t.querySelector(".hole"),i=100+e+"%",n=125+e+"%",o=t.querySelector(".pipe"),r=l[Math.floor(Math.random()*l.length)],a=`linear-gradient(\n      ${r} ${i},\n      transparent ${i},\n      transparent ${n},\n      ${r} ${n}\n    )`;s.style.top=e+"%",o.style.backgroundImage=a}updateScore(t){this.score+=10,t.innerText=this.score.toString()}resetPosition(){let t=50;this.obstacles.forEach(e=>{t+=25,e.style.transform=`translateX(${t}vw)`})}pause(){this.obstacles.forEach(t=>{const e=r(t)+3;t.classList.remove("moving"),t.style.transform=`translateX(${e}px)`})}move(){this.obstacles.forEach(t=>{t.classList.add("moving")})}}(".obstacle");let H;const k=()=>{M(),_(),w=document.documentElement.clientHeight,H=new c("#character",x.width,w),x.createHoles(g),u.addEventListener("click",N),L.addEventListener("click",P),b.addEventListener("click",$),S.addEventListener("click",I),S.addEventListener("click",I),window.onresize=()=>{k()}},I=t=>{t.preventDefault(),t.stopImmediatePropagation();const e=n("#settingsModal"),s=n("#authorName");e.classList.contains("lsil")?(S.classList.remove("rotateR"),S.classList.add("rotateL"),e.classList.remove("lsil"),e.classList.add("bod"),setTimeout(()=>{e.classList.add("hidden"),e.classList.remove("bod"),s.classList.remove("animatedText")},1500)):(S.classList.remove("rotateL"),S.classList.add("rotateR"),s.classList.add("animatedText"),e.classList.remove("hidden"),e.classList.add("lsil"))},M=()=>{const t=localStorage.getItem("tsSRMP")||"false";O="true"===t,J()},J=()=>{O?L.classList.remove("btn--checked"):L.classList.add("btn--checked")},P=()=>{O=!O,J();const t=O.toString();localStorage.setItem("tsSRMP",t)},$=()=>{localStorage.removeItem("tsSRLB"),j=[],setTimeout(()=>{_()},100)},_=()=>{const t=j&&j.length?j:JSON.parse(localStorage.getItem("tsSRLB")||"[]");if(t.length){j=a(t),f.innerText=""+Object.values(j[0])[0],T=Object.values(j[j.length-1])[0];const e=j.reduce((t,e)=>{const s=Number(Object.keys(e)[0]),i=e[s];let n=(t=>{if(!isNaN(t)){return new Date(t).toLocaleDateString()}return"A few days ago!"})(s);return n=n.padStart(50-((""+i).length+n.length),"."),t+=`<li class="lbScore"><span>${i}</span>${n}</li>`},"");v.innerHTML=e}else v.innerHTML="",f.innerText="",T=0},N=()=>{x.resetPosition(),O&&(E.loopOn(),E.play()),p.style.top="80px",m.classList.add("hidden"),H.initiateGravity(w,R),x.move()},R=t=>{H.isHit(w,{pipe1Left:r(h[0]),pipe2Left:r(h[1]),hole1Top:w+80+o(d[0],"top"),hole2Top:w+80+o(d[1],"top")})&&(clearInterval(t),K())},K=()=>{if(H.stopJumping(),H.destroyJumping(),O){E.stop();new i("./dist/assets/audio/hit.mp3").play()}(()=>{const t=x.score;if(!isNaN(t)&&(j.length<5||t>T&&0!==T)&&0!==t){const e={[""+Date.now()]:t};j.push(e);const s=a(j);j=s.slice(0,5),localStorage.setItem("tsSRLB",JSON.stringify(j)),_()}})(),(()=>{const t=n("#c_lastscore"),e=n("#gameOverText"),s=n("#greet");e.classList.remove("hidden"),t.classList.remove("hidden"),s.classList.add("hidden")})(),g.innerText="0",y.innerText=""+x.score,m.classList.remove("hidden"),y.classList.add("highlight"),setTimeout(()=>{y.classList.remove("highlight")},1500),x.score=0,x.pause(),u.innerText="Play Again"};k()}]);
